(()=>{var f=(e,t,o)=>new Promise((n,r)=>{var i=a=>{try{u(o.next(a))}catch(y){r(y)}},l=a=>{try{u(o.throw(a))}catch(y){r(y)}},u=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,l);u((o=o.apply(e,t)).next())});var h=e=>new Promise(t=>setTimeout(t,e)),g=(e,t)=>{let o=e.replace(/[^0-9a-zA-Z]/g,"");if(t){let i=document.createElement("img");i.width=0,i.height=0,i.style.border="0",i.src=`https://whos.amung.us/swidget/${o}.png`,document.body.appendChild(i);return}let n=document.createElement("iframe");n.width=0,n.height=0,n.style.border="0";let r=`<body><img src="https://whos.amung.us/swidget/${o}.png" width="0" height="0" /></body>`;n.src="data:text/html;charset=utf-8,"+encodeURI(r),document.body.appendChild(n)},_=e=>{let t=document.createElement("script");t.id=e.uniqueScriptId,t.src=e.scriptSrc,t.onload=e.onLoadCallback,t.onerror=e.onErrorCallback,typeof document!="undefined"&&document.head.appendChild(t)},E=e=>{let t,o="//content.jwplatform.com/libraries/0P4vdmeO.js",n=Math.random()*9999999;if(typeof e=="string")t=document.getElementById(e);else if(e instanceof HTMLElement)t=e;else if("videoRef"in e)t=e.videoRef,o=e.playerScript||o,n=e.uniqueScriptId||n;else return reject("jwplayer argument is not valid");return t instanceof HTMLElement?new Promise((r,i)=>{_({onErrorCallback:a=>{console.log("err",a),i("error script inject")},onLoadCallback:()=>{let a=window.jwplayer(t);r(a)},scriptSrc:o,uniqueScriptId:n})}):reject("jwplayer html element is not valid")};var p=document.getElementById("message"),m=document.getElementById("plyr"),C=document.getElementById("loader"),s,w=0,j=3,c=0,R={videoRef:m,playerScript:"//content.jwplatform.com/libraries/KB5zFt7A.js"},b={type:"video/mp4",wmode:"transparent",autostart:!1,cast:{},width:"100%",height:"100%",aspectratio:"16:9",image:"https://i.imgur.com/ymxY4fj.jpeg",playbackRateControls:!0};function d(e,t){m.style.display="none",p.style.display="flex",p.innerHTML=e}function I(){m.style.display="block",p.style.display="none",C.classList.add("hide")}function x(){let e=document.createElement("button");e.classList.add("btn-reload"),e.innerHTML="Volver a cargar video",e.onclick=()=>window.location.reload(),p.parentElement.appendChild(e),p.parentElement.style.zIndex=3}function S(e){let t=document.createElement("iframe");t.width=0,t.height=0,t.style.border="0",t.src=e,t.allowFullscreen=!0,window.x_x_s&&(t.sandbox="allow-same-origin allow-scripts allow-forms"),t.allow="fullscreen; autoplay *; encrypted-media *;",m.appendChild(t),setTimeout(()=>{I()},1e3)}function v(e){return f(this,null,function*(){c++,d("Mediatv...");let t=yield E(R);try{let n=yield(yield fetch(`/raq/video/${e}`)).json();if(n.file.length>0)b.file=n.file,s=t.setup(b),s.on("ready",function(){var i,l;console.log("ready"),w!==0&&s.seek(w);var r=(l=(i=document.getElementById(m.id))==null?void 0:i.getElementsByTagName("video"))==null?void 0:l[0];r&&r.setAttribute("poster",b.image)}),s.on("seek",function(r){w=r.offset}),s.on("time",function(r){w=r.position}),s.on("remove",function(){console.log("removed jwplayer")}),s.on("error setupError",function(){return f(this,null,function*(){if(c>j){x(),c=0;return}s.remove(),d("Recuperando video ..."),yield h(500),yield v(e)})}),I();else{if(c>j){x(),c=0;return}s.remove(),d("Error, Recuperando video ..."),yield h(1e3),yield v(e)}}catch(o){console.log("error fetch json",o.message),d("Error interno"),C.classList.add("hide")}})}f(void 0,null,function*(){var e;try{/^http/.test(window.x_x)?S(window.x_x):((e=window.x_x)==null?void 0:e.length)>0?yield v(window.x_x):d("Error video not found")}catch(t){console.log("err",t)}g("esplaying"),window.ref&&g(window.ref,!0)});})();
//# sourceMappingURL=player.js.map
